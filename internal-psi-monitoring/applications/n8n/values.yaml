# 1. DATABASE CONFIGURATION (Top-level)
db:
  type: postgresdb
  externalPostgresql:
    host: pg-1e155c21-oyegokeodev-f11d.f.aivencloud.com
    port: 20109
    database: n8n
    username: n8n_user
    # Ensure this secret exists with the key 'password'
    existingSecret: n8n-db-secret

# 2. CONFIGURATION (Environment Variables)
# These are converted to env vars by the chart automatically.
config:
  N8N_HOST: "n8n.example.com"
  N8N_PROTOCOL: "https"
  GENERIC_TIMEZONE: "UTC"
  N8N_SECURE_COOKIE: "true"
  N8N_ENABLE_COMMUNITY_NODES: "true"

# 3. KUBERNETES SETTINGS (Under 'main')
# main:
#   resources:
#     requests:
#       cpu: 100m
#       memory: 256Mi
#     limits:
#       cpu: 500m
#       memory: 1Gi

# # 4. INGRESS (AWS ALB Shared)
# ingress:
#   enabled: true
#   className: alb
#   annotations:
#     alb.ingress.kubernetes.io/scheme: internet-facing
#     alb.ingress.kubernetes.io/target-type: ip
#     alb.ingress.kubernetes.io/group.name: "psi-monitoring"
#     alb.ingress.kubernetes.io/group.order: "20"
#     alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
#     alb.ingress.kubernetes.io/ssl-redirect: '443'
#     alb.ingress.kubernetes.io/healthcheck-path: /healthz
#     alb.ingress.kubernetes.io/healthcheck-interval-seconds: '10'
#     alb.ingress.kubernetes.io/success-codes: "200"
#   hosts:
#     - host: n8n.example.com
#       paths:
#         - path: /
#           pathType: Prefix