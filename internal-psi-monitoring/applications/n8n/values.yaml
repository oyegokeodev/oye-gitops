# In version 1.16.19, most settings are nested under 'main'
main:
  config:
    # Basic n8n vars
    N8N_HOST: "n8n.example.com"
    N8N_PROTOCOL: "https"
    GENERIC_TIMEZONE: "UTC"
  
  # Database must be under 'main' for this chart version
  db:
    type: postgresdb
    externalPostgresql:
      host: pg-1e155c21-oyegokeodev-f11d.f.aivencloud.com
      port: 20109
      database: n8n
      username: n8n_user
      existingSecret: n8n-db-secret # Key must be 'password'
      
  resources:
    limits:
      memory: 1Gi
    requests:
      memory: 256Mi

# Ingress remains at the root level
# ingress:
#   enabled: true
#   className: alb
#   annotations:
#     alb.ingress.kubernetes.io/scheme: internet-facing
#     alb.ingress.kubernetes.io/group.name: "psi-monitoring"
#     alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
#     alb.ingress.kubernetes.io/ssl-redirect: '443'
#     alb.ingress.kubernetes.io/healthcheck-path: /healthz
#   hosts:
#     - host: n8n.example.com
#       paths:
#         - path: /
#           pathType: Prefix